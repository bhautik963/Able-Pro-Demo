"use strict";
var core_1 = require('@angular/core');
var platform_browser_1 = require('@angular/platform-browser');
var ɵngcc0 = require('@angular/core');
var ɵngcc1 = require('@angular/platform-browser');
var ɵngcc2 = require('@angular/common');
var ɵngcc3 = require('./ng-table-sorting.directive');
var ɵngcc4 = require('./ng-table-filtering.directive');

var _c0 = function (a0, a1) { return { "fa-chevron-down": a0, "fa-chevron-up": a1 }; };
function NgTableComponent_th_3_i_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "i", 7);
} if (rf & 2) {
    var column_r3 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction2(1, _c0, column_r3.sort === "desc", column_r3.sort === "asc"));
} }
function NgTableComponent_th_3_Template(rf, ctx) { if (rf & 1) {
    var _r7 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "th", 5);
    ɵngcc0.ɵɵlistener("sortChanged", function NgTableComponent_th_3_Template_th_sortChanged_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r7); var ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.onChangeTable($event); });
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵtemplate(2, NgTableComponent_th_3_i_2_Template, 1, 4, "i", 6);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var column_r3 = ctx.$implicit;
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵpropertyInterpolate("ngClass", column_r3.className || "");
    ɵngcc0.ɵɵproperty("ngTableSorting", ctx_r0.config)("column", column_r3);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", column_r3.title, " ");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.config && column_r3.sort);
} }
function NgTableComponent_tr_5_td_1_input_1_Template(rf, ctx) { if (rf & 1) {
    var _r12 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "input", 9);
    ɵngcc0.ɵɵlistener("tableChanged", function NgTableComponent_tr_5_td_1_input_1_Template_input_tableChanged_0_listener() { ɵngcc0.ɵɵrestoreView(_r12); var ctx_r11 = ɵngcc0.ɵɵnextContext(3); return ctx_r11.onChangeTable(ctx_r11.config); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var column_r9 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵpropertyInterpolate("placeholder", column_r9.filtering.placeholder);
    ɵngcc0.ɵɵproperty("ngTableFiltering", column_r9.filtering);
} }
function NgTableComponent_tr_5_td_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵtemplate(1, NgTableComponent_tr_5_td_1_input_1_Template, 1, 2, "input", 8);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var column_r9 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", column_r9.filtering);
} }
function NgTableComponent_tr_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "tr");
    ɵngcc0.ɵɵtemplate(1, NgTableComponent_tr_5_td_1_Template, 2, 1, "td", 4);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r1.columns);
} }
function NgTableComponent_tr_6_td_1_Template(rf, ctx) { if (rf & 1) {
    var _r19 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "td", 11);
    ɵngcc0.ɵɵlistener("click", function NgTableComponent_tr_6_td_1_Template_td_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r19); var column_r16 = ctx.$implicit; var row_r14 = ɵngcc0.ɵɵnextContext().$implicit; var ctx_r17 = ɵngcc0.ɵɵnextContext(); return ctx_r17.cellClick(row_r14, column_r16.name); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var column_r16 = ctx.$implicit;
    var row_r14 = ɵngcc0.ɵɵnextContext().$implicit;
    var ctx_r15 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("innerHtml", ctx_r15.getData(row_r14, column_r16.name), ɵngcc0.ɵɵsanitizeHtml);
} }
function NgTableComponent_tr_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "tr");
    ɵngcc0.ɵɵtemplate(1, NgTableComponent_tr_6_td_1_Template, 1, 1, "td", 10);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r2.columns);
} }
var NgTableComponent = (function () {
    function NgTableComponent(sanitizer) {
        this.sanitizer = sanitizer;
        // Table values
        this.rows = [];
        // Outputs (Events)
        this.tableChanged = new core_1.EventEmitter();
        this.cellClicked = new core_1.EventEmitter();
        this.showFilterRow = false;
        this._columns = [];
        this._config = {};
    }
    Object.defineProperty(NgTableComponent.prototype, "config", {
        get: function () {
            return this._config;
        },
        set: function (conf) {
            if (!conf.className) {
                conf.className = 'table-striped table-bordered';
            }
            if (conf.className instanceof Array) {
                conf.className = conf.className.join(' ');
            }
            this._config = conf;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgTableComponent.prototype, "columns", {
        get: function () {
            return this._columns;
        },
        set: function (values) {
            var _this = this;
            values.forEach(function (value) {
                if (value.filtering) {
                    _this.showFilterRow = true;
                }
                if (value.className && value.className instanceof Array) {
                    value.className = value.className.join(' ');
                }
                var column = _this._columns.find(function (col) { return col.name === value.name; });
                if (column) {
                    Object.assign(column, value);
                }
                if (!column) {
                    _this._columns.push(value);
                }
            });
        },
        enumerable: true,
        configurable: true
    });
    NgTableComponent.prototype.sanitize = function (html) {
        return this.sanitizer.bypassSecurityTrustHtml(html);
    };
    Object.defineProperty(NgTableComponent.prototype, "configColumns", {
        get: function () {
            var sortColumns = [];
            this.columns.forEach(function (column) {
                if (column.sort) {
                    sortColumns.push(column);
                }
            });
            return { columns: sortColumns };
        },
        enumerable: true,
        configurable: true
    });
    NgTableComponent.prototype.onChangeTable = function (column) {
        this._columns.forEach(function (col) {
            if (col.name !== column.name && col.sort !== false) {
                col.sort = '';
            }
        });
        this.tableChanged.emit({ sorting: this.configColumns });
    };
    NgTableComponent.prototype.getData = function (row, propertyName) {
        return propertyName.split('.').reduce(function (prev, curr) { return prev[curr]; }, row);
    };
    NgTableComponent.prototype.cellClick = function (row, column) {
        this.cellClicked.emit({ row: row, column: column });
    };
    /** @nocollapse */
    NgTableComponent.ctorParameters = [
        { type: platform_browser_1.DomSanitizer, },
    ];
    NgTableComponent.propDecorators = {
        'rows': [{ type: core_1.Input },],
        'config': [{ type: core_1.Input },],
        'tableChanged': [{ type: core_1.Output },],
        'cellClicked': [{ type: core_1.Output },],
        'columns': [{ type: core_1.Input },],
    };
NgTableComponent.ɵfac = function NgTableComponent_Factory(t) { return new (t || NgTableComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.DomSanitizer)); };
NgTableComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NgTableComponent, selectors: [["ng-table"]], inputs: { rows: "rows", config: "config", columns: "columns" }, outputs: { tableChanged: "tableChanged", cellClicked: "cellClicked" }, decls: 7, vars: 4, consts: [["role", "grid", 1, "table", "dataTable", 2, "width", "100%", 3, "ngClass"], ["role", "row"], [3, "ngTableSorting", "column", "ngClass", "sortChanged", 4, "ngFor", "ngForOf"], [4, "ngIf"], [4, "ngFor", "ngForOf"], [3, "ngTableSorting", "column", "ngClass", "sortChanged"], ["class", "pull-right fa", 3, "ngClass", 4, "ngIf"], [1, "pull-right", "fa", 3, "ngClass"], ["class", "form-control", "style", "width: auto;", 3, "placeholder", "ngTableFiltering", "tableChanged", 4, "ngIf"], [1, "form-control", 2, "width", "auto", 3, "placeholder", "ngTableFiltering", "tableChanged"], [3, "innerHtml", "click", 4, "ngFor", "ngForOf"], [3, "innerHtml", "click"]], template: function NgTableComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "table", 0);
        ɵngcc0.ɵɵelementStart(1, "thead");
        ɵngcc0.ɵɵelementStart(2, "tr", 1);
        ɵngcc0.ɵɵtemplate(3, NgTableComponent_th_3_Template, 3, 5, "th", 2);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(4, "tbody");
        ɵngcc0.ɵɵtemplate(5, NgTableComponent_tr_5_Template, 2, 1, "tr", 3);
        ɵngcc0.ɵɵtemplate(6, NgTableComponent_tr_6_Template, 2, 1, "tr", 4);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵpropertyInterpolate("ngClass", ctx.config.className || "");
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.columns);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showFilterRow);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.rows);
    } }, directives: [ɵngcc2.NgClass, ɵngcc2.NgForOf, ɵngcc2.NgIf, ɵngcc3.NgTableSortingDirective, ɵngcc4.NgTableFilteringDirective], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgTableComponent, [{
        type: core_1.Component,
        args: [{
                selector: 'ng-table',
                template: "\n    <table class=\"table dataTable\" ngClass=\"{{config.className || ''}}\"\n           role=\"grid\" style=\"width: 100%;\">\n      <thead>\n        <tr role=\"row\">\n          <th *ngFor=\"let column of columns\" [ngTableSorting]=\"config\" [column]=\"column\" \n              (sortChanged)=\"onChangeTable($event)\" ngClass=\"{{column.className || ''}}\">\n            {{column.title}}\n            <i *ngIf=\"config && column.sort\" class=\"pull-right fa\"\n              [ngClass]=\"{'fa-chevron-down': column.sort === 'desc', 'fa-chevron-up': column.sort === 'asc'}\"></i>\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n      <tr *ngIf=\"showFilterRow\">\n        <td *ngFor=\"let column of columns\">\n          <input *ngIf=\"column.filtering\" placeholder=\"{{column.filtering.placeholder}}\"\n                 [ngTableFiltering]=\"column.filtering\"\n                 class=\"form-control\"\n                 style=\"width: auto;\"\n                 (tableChanged)=\"onChangeTable(config)\"/>\n        </td>\n      </tr>\n        <tr *ngFor=\"let row of rows\">\n          <td (click)=\"cellClick(row, column.name)\" *ngFor=\"let column of columns\" [innerHtml]=\"getData(row, column.name)\"></td>\n        </tr>\n      </tbody>\n    </table>\n  "
            }]
    }], function () { return [{ type: ɵngcc1.DomSanitizer }]; }, { rows: [{
            type: core_1.Input
        }], tableChanged: [{
            type: core_1.Output
        }], cellClicked: [{
            type: core_1.Output
        }], config: [{
            type: core_1.Input
        }], columns: [{
            type: core_1.Input
        }] }); })();
    return NgTableComponent;
}());
exports.NgTableComponent = NgTableComponent;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctdGFibGUuY29tcG9uZW50LmpzIiwic291cmNlcyI6WyJuZy10YWJsZS5jb21wb25lbnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O01Ba0ZNLEFBTUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQVdBIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgY29yZV8xID0gcmVxdWlyZSgnQGFuZ3VsYXIvY29yZScpO1xudmFyIHBsYXRmb3JtX2Jyb3dzZXJfMSA9IHJlcXVpcmUoJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInKTtcbnZhciBOZ1RhYmxlQ29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOZ1RhYmxlQ29tcG9uZW50KHNhbml0aXplcikge1xuICAgICAgICB0aGlzLnNhbml0aXplciA9IHNhbml0aXplcjtcbiAgICAgICAgLy8gVGFibGUgdmFsdWVzXG4gICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAvLyBPdXRwdXRzIChFdmVudHMpXG4gICAgICAgIHRoaXMudGFibGVDaGFuZ2VkID0gbmV3IGNvcmVfMS5FdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5jZWxsQ2xpY2tlZCA9IG5ldyBjb3JlXzEuRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuc2hvd0ZpbHRlclJvdyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9jb2x1bW5zID0gW107XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IHt9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmdUYWJsZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29uZmlnXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjb25mKSB7XG4gICAgICAgICAgICBpZiAoIWNvbmYuY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICAgICAgY29uZi5jbGFzc05hbWUgPSAndGFibGUtc3RyaXBlZCB0YWJsZS1ib3JkZXJlZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29uZi5jbGFzc05hbWUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgIGNvbmYuY2xhc3NOYW1lID0gY29uZi5jbGFzc05hbWUuam9pbignICcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5nVGFibGVDb21wb25lbnQucHJvdG90eXBlLCBcImNvbHVtbnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb2x1bW5zO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuZmlsdGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNob3dGaWx0ZXJSb3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuY2xhc3NOYW1lICYmIHZhbHVlLmNsYXNzTmFtZSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmNsYXNzTmFtZSA9IHZhbHVlLmNsYXNzTmFtZS5qb2luKCcgJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBfdGhpcy5fY29sdW1ucy5maW5kKGZ1bmN0aW9uIChjb2wpIHsgcmV0dXJuIGNvbC5uYW1lID09PSB2YWx1ZS5uYW1lOyB9KTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29sdW1uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9jb2x1bW5zLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBOZ1RhYmxlQ29tcG9uZW50LnByb3RvdHlwZS5zYW5pdGl6ZSA9IGZ1bmN0aW9uIChodG1sKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhbml0aXplci5ieXBhc3NTZWN1cml0eVRydXN0SHRtbChodG1sKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOZ1RhYmxlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjb25maWdDb2x1bW5zXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc29ydENvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnNvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc29ydENvbHVtbnMucHVzaChjb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHsgY29sdW1uczogc29ydENvbHVtbnMgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmdUYWJsZUNvbXBvbmVudC5wcm90b3R5cGUub25DaGFuZ2VUYWJsZSA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgdGhpcy5fY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2wpIHtcbiAgICAgICAgICAgIGlmIChjb2wubmFtZSAhPT0gY29sdW1uLm5hbWUgJiYgY29sLnNvcnQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29sLnNvcnQgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudGFibGVDaGFuZ2VkLmVtaXQoeyBzb3J0aW5nOiB0aGlzLmNvbmZpZ0NvbHVtbnMgfSk7XG4gICAgfTtcbiAgICBOZ1RhYmxlQ29tcG9uZW50LnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24gKHJvdywgcHJvcGVydHlOYW1lKSB7XG4gICAgICAgIHJldHVybiBwcm9wZXJ0eU5hbWUuc3BsaXQoJy4nKS5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGN1cnIpIHsgcmV0dXJuIHByZXZbY3Vycl07IH0sIHJvdyk7XG4gICAgfTtcbiAgICBOZ1RhYmxlQ29tcG9uZW50LnByb3RvdHlwZS5jZWxsQ2xpY2sgPSBmdW5jdGlvbiAocm93LCBjb2x1bW4pIHtcbiAgICAgICAgdGhpcy5jZWxsQ2xpY2tlZC5lbWl0KHsgcm93OiByb3csIGNvbHVtbjogY29sdW1uIH0pO1xuICAgIH07XG4gICAgTmdUYWJsZUNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgICAgICB7IHR5cGU6IGNvcmVfMS5Db21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmctdGFibGUnLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPHRhYmxlIGNsYXNzPVxcXCJ0YWJsZSBkYXRhVGFibGVcXFwiIG5nQ2xhc3M9XFxcInt7Y29uZmlnLmNsYXNzTmFtZSB8fCAnJ319XFxcIlxcbiAgICAgICAgICAgcm9sZT1cXFwiZ3JpZFxcXCIgc3R5bGU9XFxcIndpZHRoOiAxMDAlO1xcXCI+XFxuICAgICAgPHRoZWFkPlxcbiAgICAgICAgPHRyIHJvbGU9XFxcInJvd1xcXCI+XFxuICAgICAgICAgIDx0aCAqbmdGb3I9XFxcImxldCBjb2x1bW4gb2YgY29sdW1uc1xcXCIgW25nVGFibGVTb3J0aW5nXT1cXFwiY29uZmlnXFxcIiBbY29sdW1uXT1cXFwiY29sdW1uXFxcIiBcXG4gICAgICAgICAgICAgIChzb3J0Q2hhbmdlZCk9XFxcIm9uQ2hhbmdlVGFibGUoJGV2ZW50KVxcXCIgbmdDbGFzcz1cXFwie3tjb2x1bW4uY2xhc3NOYW1lIHx8ICcnfX1cXFwiPlxcbiAgICAgICAgICAgIHt7Y29sdW1uLnRpdGxlfX1cXG4gICAgICAgICAgICA8aSAqbmdJZj1cXFwiY29uZmlnICYmIGNvbHVtbi5zb3J0XFxcIiBjbGFzcz1cXFwicHVsbC1yaWdodCBmYVxcXCJcXG4gICAgICAgICAgICAgIFtuZ0NsYXNzXT1cXFwieydmYS1jaGV2cm9uLWRvd24nOiBjb2x1bW4uc29ydCA9PT0gJ2Rlc2MnLCAnZmEtY2hldnJvbi11cCc6IGNvbHVtbi5zb3J0ID09PSAnYXNjJ31cXFwiPjwvaT5cXG4gICAgICAgICAgPC90aD5cXG4gICAgICAgIDwvdHI+XFxuICAgICAgPC90aGVhZD5cXG4gICAgICA8dGJvZHk+XFxuICAgICAgPHRyICpuZ0lmPVxcXCJzaG93RmlsdGVyUm93XFxcIj5cXG4gICAgICAgIDx0ZCAqbmdGb3I9XFxcImxldCBjb2x1bW4gb2YgY29sdW1uc1xcXCI+XFxuICAgICAgICAgIDxpbnB1dCAqbmdJZj1cXFwiY29sdW1uLmZpbHRlcmluZ1xcXCIgcGxhY2Vob2xkZXI9XFxcInt7Y29sdW1uLmZpbHRlcmluZy5wbGFjZWhvbGRlcn19XFxcIlxcbiAgICAgICAgICAgICAgICAgW25nVGFibGVGaWx0ZXJpbmddPVxcXCJjb2x1bW4uZmlsdGVyaW5nXFxcIlxcbiAgICAgICAgICAgICAgICAgY2xhc3M9XFxcImZvcm0tY29udHJvbFxcXCJcXG4gICAgICAgICAgICAgICAgIHN0eWxlPVxcXCJ3aWR0aDogYXV0bztcXFwiXFxuICAgICAgICAgICAgICAgICAodGFibGVDaGFuZ2VkKT1cXFwib25DaGFuZ2VUYWJsZShjb25maWcpXFxcIi8+XFxuICAgICAgICA8L3RkPlxcbiAgICAgIDwvdHI+XFxuICAgICAgICA8dHIgKm5nRm9yPVxcXCJsZXQgcm93IG9mIHJvd3NcXFwiPlxcbiAgICAgICAgICA8dGQgKGNsaWNrKT1cXFwiY2VsbENsaWNrKHJvdywgY29sdW1uLm5hbWUpXFxcIiAqbmdGb3I9XFxcImxldCBjb2x1bW4gb2YgY29sdW1uc1xcXCIgW2lubmVySHRtbF09XFxcImdldERhdGEocm93LCBjb2x1bW4ubmFtZSlcXFwiPjwvdGQ+XFxuICAgICAgICA8L3RyPlxcbiAgICAgIDwvdGJvZHk+XFxuICAgIDwvdGFibGU+XFxuICBcIlxuICAgICAgICAgICAgICAgIH0sXSB9LFxuICAgIF07XG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgTmdUYWJsZUNvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9IFtcbiAgICAgICAgeyB0eXBlOiBwbGF0Zm9ybV9icm93c2VyXzEuRG9tU2FuaXRpemVyLCB9LFxuICAgIF07XG4gICAgTmdUYWJsZUNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICAgICAgJ3Jvd3MnOiBbeyB0eXBlOiBjb3JlXzEuSW5wdXQgfSxdLFxuICAgICAgICAnY29uZmlnJzogW3sgdHlwZTogY29yZV8xLklucHV0IH0sXSxcbiAgICAgICAgJ3RhYmxlQ2hhbmdlZCc6IFt7IHR5cGU6IGNvcmVfMS5PdXRwdXQgfSxdLFxuICAgICAgICAnY2VsbENsaWNrZWQnOiBbeyB0eXBlOiBjb3JlXzEuT3V0cHV0IH0sXSxcbiAgICAgICAgJ2NvbHVtbnMnOiBbeyB0eXBlOiBjb3JlXzEuSW5wdXQgfSxdLFxuICAgIH07XG4gICAgcmV0dXJuIE5nVGFibGVDb21wb25lbnQ7XG59KCkpO1xuZXhwb3J0cy5OZ1RhYmxlQ29tcG9uZW50ID0gTmdUYWJsZUNvbXBvbmVudDtcbiJdfQ==